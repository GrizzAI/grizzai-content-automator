<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GrizzAI Content Automator — AI with Bite</title>
  <style>
    :root{
      --bg:#0b0b0f; --card:#13131a; --muted:#9aa3b2; --text:#e9eef7;
      --gold:#f5c542; --blue:#3aa7ff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;background:var(--bg);color:var(--text);line-height:1.45}
    .wrap{max-width:920px;margin:0 auto;padding:28px 16px 60px}
    header{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    header .badge{width:38px;height:38px;border-radius:10px;background:linear-gradient(135deg,var(--gold),var(--blue))}
    h1{margin:0;font-size:1.25rem}
    .sub{color:var(--muted);font-size:.95rem;margin:.25rem 0 0}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:860px){.grid{grid-template-columns:1fr}}
    .card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:14px}
    .card h2{margin:0;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08);font-size:1rem}
    .card .body{padding:14px 16px}
    label{display:block;margin-bottom:6px;color:var(--muted);font-size:.92rem}
    textarea,input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:#13131a;color:#e9eef7}
    textarea{min-height:96px;resize:vertical}

    /* Platform checkbox layout (fixed) */
    .checks{
      display:grid;
      grid-template-columns: repeat(5, minmax(140px, 1fr));
      gap: 10px;
      margin-top: 8px;
    }
    @media (max-width: 900px){ .checks{ grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 600px){ .checks{ grid-template-columns: repeat(2, 1fr); } }
    .check{
      display:flex;align-items:center;gap:10px;background:#13131a;
      border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:8px 10px;min-height:44px;
    }
    .check input{margin:0;width:18px;height:18px}
    .check label{margin:0;white-space:nowrap;color:var(--text);font-size:.9rem;cursor:pointer}

    .actions{display:flex;align-items:center;gap:12px;margin-top:8px}
    .btn{border:0;border-radius:12px;padding:11px 14px;font-weight:700;cursor:pointer;color:#0a0a0a;background:linear-gradient(135deg,var(--gold),var(--blue))}
    .btn[disabled]{opacity:.6;cursor:not-allowed}
    .ghost{border:1px solid rgba(255,255,255,.15);background:transparent;color:#e9eef7}
    .loader{display:none;align-items:center;gap:8px;color:var(--muted)}
    .loader.show{display:flex}
    .dot{width:6px;height:6px;border-radius:50%;background:currentColor;opacity:.7;animation:bounce 1s infinite ease-in-out}
    .dot:nth-child(2){animation-delay:.15s}.dot:nth-child(3){animation-delay:.3s}
    @keyframes bounce{0%,80%,100%{transform:scale(.7);opacity:.5}40%{transform:scale(1);opacity:1}}

    .platforms{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:860px){.platforms{grid-template-columns:1fr}}
    .p-card{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px}
    .p-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
    .p-name{font-weight:700}
    .copy{border:1px solid rgba(255,255,255,.16);background:transparent;color:#e9eef7;border-radius:8px;padding:6px 10px;cursor:pointer}
    .text{white-space:pre-wrap}
    .tags{margin-top:8px;color:var(--muted);font-size:.95rem}

    footer{margin-top:26px;text-align:center;color:var(--muted)}
    .grizzai-brand{
      background: linear-gradient(135deg, var(--gold), var(--blue));
      -webkit-background-clip:text;background-clip:text;
      -webkit-text-fill-color:transparent;color:transparent;
      display:inline-block;font-weight:700;position:relative;cursor:default;transition:opacity .3s ease;
    }
    .grizzai-brand::after{
      content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;
      background:linear-gradient(120deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.5) 50%,rgba(255,255,255,0) 100%);
      transform:skewX(-20deg);
    }
    .grizzai-brand:hover::after{animation:shimmer 1.2s ease-in-out}
    @keyframes shimmer{0%{left:-100%}100%{left:100%}}
    .ver{color:var(--muted);font-size:.9rem;margin-left:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- HERO HEADER -->
    <header>
      <div class="badge"></div>
      <div>
        <h1><span class="grizzai-brand">GrizzAI</span> Content Automator</h1>
        <p class="sub">Turn one idea into five platform-ready posts — instantly.<br><em>AI with Bite.</em></p>
      </div>
    </header>

    <div class="grid">
      <!-- INPUTS -->
      <section class="card">
        <h2>Create your brief</h2>
        <div class="body" id="brief">
          <label for="idea">Core idea / message</label>
          <textarea id="idea" placeholder="e.g., Launching GrizzAI’s content automator for creators who need faster posting."></textarea>

          <label for="audience">Audience</label>
          <input id="audience" placeholder="e.g., Freelancers & small businesses" />

          <label for="goal">Goal / CTA</label>
          <input id="goal" placeholder="e.g., Join the waitlist at grizzai.com" />

          <label>Platforms</label>
          <div class="checks">
            <label class="check"><input type="checkbox" name="platform" value="LinkedIn" /><span>LinkedIn</span></label>
            <label class="check"><input type="checkbox" name="platform" value="Instagram" /><span>Instagram</span></label>
            <label class="check"><input type="checkbox" name="platform" value="X" /><span>X</span></label>
            <label class="check"><input type="checkbox" name="platform" value="Threads" /><span>Threads</span></label>
            <label class="check"><input type="checkbox" name="platform" value="Facebook" /><span>Facebook</span></label>
          </div>

          <label for="tone">Tone</label>
          <select id="tone">
            <option>Bold</option>
            <option>Professional</option>
            <option>Casual</option>
            <option>Educational</option>
          </select>

          <div class="actions">
            <button id="generate" class="btn">Generate Content</button>
            <button id="clear" class="btn ghost">Clear</button>
            <div id="loading" class="loader">
              <span class="dot"></span><span class="dot"></span><span class="dot"></span>
              Generating…
            </div>
          </div>
        </div>
      </section>

      <!-- OUTPUTS -->
      <section class="card">
        <h2>Outputs</h2>
        <div class="body">
          <div id="empty-state" class="tags">Select platforms and click “Generate Content”.</div>
          <div id="platforms" class="platforms" hidden></div>
        </div>
      </section>
    </div>

    <footer>
      <p>
        Built by <b class="grizzai-brand">GrizzAI</b> — AI with Bite.
        <span class="ver">v1.0-M2-Verified</span>
      </p>
    </footer>
  </div>

  <script>
    // Copy helper
    async function copyText(text, btn){
      try{
        await navigator.clipboard.writeText(text);
        const prev = btn.textContent; btn.textContent = 'Copied!';
        setTimeout(()=>btn.textContent = prev, 1200);
      }catch{
        const ta = document.createElement('textarea');
        ta.value = text; document.body.appendChild(ta); ta.select();
        document.execCommand('copy'); document.body.removeChild(ta);
      }
    }

    // OpenAI call (works with your existing key-in-localStorage flow)
    async function callOpenAI(promptText){
      const apiKey = localStorage.getItem('OPENAI_API_KEY') || prompt('Enter your OpenAI API key (stored locally):');
      if(apiKey) localStorage.setItem('OPENAI_API_KEY', apiKey);

      const body = {
        model: 'gpt-4o-mini',
        messages: [
          { role: 'system', content: 'You are GrizzAI Content Automator. Generate concise, platform-optimized posts in the selected tone. Follow strict per-platform rules.' },
          { role: 'user', content: promptText }
        ]
      };

      const res = await fetch('https://api.openai.com/v1/chat/completions',{
        method:'POST',
        headers:{'Content-Type':'application/json','Authorization':`Bearer ${apiKey}`},
        body: JSON.stringify(body)
      });
      if(!res.ok){
        const t = await res.text();
        throw new Error('API request failed: ' + t.slice(0,200));
      }
      const data = await res.json();
      return data.choices?.[0]?.message?.content?.trim() || '(no content)';
    }

    function getBrief(){
      const idea = document.getElementById('idea').value.trim();
      const audience = document.getElementById('audience').value.trim();
      const goal = document.getElementById('goal').value.trim();
      const tone = document.getElementById('tone').value.trim() || 'Bold';
      const platforms = Array.from(document.querySelectorAll('input[name="platform"]:checked')).map(c => c.value);
      return { idea, audience, goal, tone, platforms };
    }

    function validate(brief){
      const errs = [];
      if(!brief.idea) errs.push('Core idea / message is required.');
      if(!brief.audience) errs.push('Audience is required.');
      if(!brief.goal) errs.push('Goal / CTA is required.');
      if(!brief.platforms.length) errs.push('Please select at least one platform.');
      return errs;
    }

    function buildCard(platform, text){
      const card = document.createElement('div'); card.className = 'p-card';
      const head = document.createElement('div'); head.className = 'p-head';
      const name = document.createElement('div'); name.className = 'p-name'; name.textContent = platform;
      const copyBtn = document.createElement('button'); copyBtn.className = 'copy'; copyBtn.textContent = 'Copy';
      head.appendChild(name); head.appendChild(copyBtn);
      const body = document.createElement('div'); body.className = 'text'; body.textContent = text;
      card.appendChild(head); card.appendChild(body);
      copyBtn.addEventListener('click', ()=>copyText(text, copyBtn));
      return card;
    }

    async function renderOutputs(brief){
      const out = document.getElementById('platforms');
      const empty = document.getElementById('empty-state');
      const loader = document.getElementById('loading');
      out.innerHTML = ''; loader.classList.add('show');
      try{
        for(const p of brief.platforms){
          const userPrompt = `Generate a ${p} post about: ${brief.idea}. Audience: ${brief.audience}. Goal: ${brief.goal}. Tone: ${brief.tone}. Follow native ${p} format rules and include a clear CTA.`;
          const text = await callOpenAI(userPrompt);
          out.appendChild(buildCard(p, text));
        }
        empty.hidden = true; out.hidden = false;
      }finally{
        loader.classList.remove('show');
      }
    }

    document.getElementById('generate').addEventListener('click', async ()=>{
      const brief = getBrief();
      const errs = validate(brief);
      if(errs.length) return alert('Please fix:\n' + errs.join('\n'));
      try{ await renderOutputs(brief); }
      catch(e){ alert('Error generating content:\n' + e.message); }
    });

    document.getElementById('clear').addEventListener('click', ()=>{
      document.getElementById('brief').reset();
      document.getElementById('platforms').innerHTML = '';
      document.getElementById('platforms').hidden = true;
      document.getElementById('empty-state').hidden = false;
    });
  </script>
</body>
</html>